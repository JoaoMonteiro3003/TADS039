<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Conselhos Leitura & Esportes</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="card">
    <h1>üí° Dicas de Receitas Caseiras</h1>
    <div id="conselho">Clique no bot√£o para descobrir uma receita!</div>
    <button id="novo">Nova Receita</button>
  </div>

  <div class="search-container">
    <input type="text" id="searchInput" placeholder="Digite o nome da receita..." />
    <button id="searchButton">Buscar</button>
  </div>

  <div id="results"></div>

  <script>
    // Array de conselhos em portugu√™s
    const conselhos = [
      "Prepare um bolo de chocolate fofinho para alegrar seu dia.",
      "Cozinhe uma lasanha de carne e queijo para o jantar da fam√≠lia.",
      "Experimente fazer p√£o caseiro fresquinho no caf√© da manh√£.",
      "Fa√ßa um risoto cremoso de frango para impressionar seus amigos.",
      "Prepare panquecas recheadas para um brunch delicioso.",
      "Cozinhe uma sopa de legumes nutritiva para aquecer o corpo.",
      "Fa√ßa brownies de chocolate para ado√ßar a tarde.",
      "Experimente uma pizza caseira com seus ingredientes favoritos.",
      "Prepare muffins de banana para um lanche r√°pido e saud√°vel.",
      "Cozinhe macarr√£o √† carbonara para uma refei√ß√£o pr√°tica e saborosa."
    ];

    const btn = document.getElementById('novo');
    const conselho = document.getElementById('conselho');

    // Fun√ß√£o para gerar conselho aleat√≥rio
    btn.addEventListener('click', () => {
      const aleatorio = Math.floor(Math.random() * conselhos.length);
      conselho.textContent = conselhos[aleatorio];
    });

    // Mapa de termos PT -> EN para busca na API
    const mapaBusca = {
      "frango": "chicken",
      "carne": "beef",
      "massa": "pasta",
      "sobremesa": "dessert",
      "sopa": "soup",
      "bolo": "cake",
      "peixe": "fish",
      "arroz": "rice",
      "ovo": "egg",
      "salada": "salad",
      "porco": "pork",
      "camar√£o": "shrimp",
      "creme": "cream",
      "queijo": "cheese",
      "chocolate": "chocolate",
      "vegetariano": "vegetarian",
      "vegano": "vegan",
      "carne bovina": "beef",
      "carne de porco": "pork",
      "bife": "steak",
      "frutos do mar": "seafood",
      "arroz doce": "rice pudding"
    };

    const categoriasTraduzidas = {
      "beef": "Carne bovina",
      "chicken": "Frango",
      "dessert": "Sobremesa",
      "lamb": "Cordeiro",
      "miscellaneous": "Diversos",
      "pasta": "Massa",
      "pork": "Porco",
      "seafood": "Frutos do mar",
      "side": "Acompanhamento",
      "starter": "Entrada",
      "vegan": "Vegano",
      "vegetarian": "Vegetariano",
      "breakfast": "Caf√© da manh√£",
      "goat": "Cabra"
    };

    function traduzirCategoria(cat) {
      if (!cat) return '';
      const catLower = cat.toLowerCase();
      return categoriasTraduzidas[catLower] || cat;
    }

    function traduzirInstrucoes(instr) {
      if (!instr) return '';
      let texto = instr.toLowerCase();
      texto = texto.replace(/bake/gi, "Asse");
      texto = texto.replace(/mix/gi, "Misture");
      texto = texto.replace(/cook/gi, "Cozinhe");
      texto = texto.replace(/boil/gi, "Ferva");
      texto = texto.replace(/heat/gi, "Aque√ßa");
      texto = texto.replace(/minutes/gi, "minutos");
      texto = texto.replace(/until/gi, "at√©");
      texto = texto.replace(/and/gi, "e");
      texto = texto.charAt(0).toUpperCase() + texto.slice(1);
      return texto;
    }

    const searchButton = document.getElementById('searchButton');
    const searchInput = document.getElementById('searchInput');
    const resultsDiv = document.getElementById('results');

    async function buscarReceita() {
      let queryPT = searchInput.value.trim().toLowerCase();
      if (!queryPT) {
        alert('Digite o nome de uma receita para buscar.');
        return;
      }

      const queryEN = mapaBusca[queryPT] || queryPT;

      resultsDiv.innerHTML = '';

      try {
        const response = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${encodeURIComponent(queryEN)}`);
        const data = await response.json();

        if (!data.meals) {
          resultsDiv.innerHTML = '<p>Nenhuma receita encontrada.</p>';
          return;
        }

        data.meals.forEach(meal => {
          let ingredientes = '';
          for (let i = 1; i <= 20; i++) {
            const ingrediente = meal[`strIngredient${i}`];
            const medida = meal[`strMeasure${i}`];
            if (ingrediente && ingrediente.trim() !== '') {
              ingredientes += `<li>${medida} ${ingrediente}</li>`;
            }
          }

          const categoriaPT = traduzirCategoria(meal.strCategory || '');
          const instrucoesPT = traduzirInstrucoes(meal.strInstructions || '');

          const card = document.createElement('div');
          card.classList.add('recipe-card');
          card.innerHTML = `
            <img src="${meal.strMealThumb}" alt="Imagem de ${meal.strMeal}" />
            <h2>${meal.strMeal}</h2>
            <p><strong>Categoria:</strong> ${categoriaPT}</p>
            <p><strong>Ingredientes:</strong></p>
            <ul>${ingredientes}</ul>
            <p><strong>Instru√ß√µes:</strong> ${instrucoesPT.substring(0, 250)}...</p>
            ${meal.strYoutube ? `<p><a href="${meal.strYoutube}" target="_blank" rel="noopener">Ver v√≠deo no YouTube</a></p>` : ''}
          `;
          resultsDiv.appendChild(card);
        });
      } catch (error) {
        alert('Erro ao buscar receitas. Tente novamente mais tarde.');
        console.error(error);
      }
    }

    searchButton.addEventListener('click', buscarReceita);
    searchInput.addEventListener('keyup', e => {
      if (e.key === 'Enter') buscarReceita();
    });
  </script>
</body>
</html>
